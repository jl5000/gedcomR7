---
title: "Referencing records"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Introduction

All GEDCOM records are given unique identifiers known as xrefs (cross-references) to allow other records to link to them. These are alphanumeric strings surrounded by '@' symbols. 

Record identifiers have been a topic of much discussion in the GEDCOM user community. Even though xref identifiers will be imported unchanged in the `gedcomS7` package, some systems do create their own xref identifiers on import. So you cannot assume they will survive between systems. However, they should always be internally consistent.

For this reason xref identifiers are not supposed to be exposed to the typical user. However this rule can only really be applied to GEDCOM software that has a point-and-click user interface, rather than one that works interactively at the R console (and the `S7` package does not allow you to hide property values). If a `shiny` app is created, then xrefs will be hidden from the user.

## Summarising and controlling identifiers

The `gedcomS7` package creates xrefs automatically when pushing creating new records. When creating a new record it will be given an xref identifying it as a standalone record that has not yet been pushed to the GEDCOM object:

```{r}
new_person <- IndividualRecord()
new_person@xref
```
If you then push it to a GEDCOM object, it will assign it a proper xref:

```{r}
ged <- push_record(new_gedcom(), new_person)
```

The property `ged@xref_prefixes` is a named vector containing any alphanumeric string (up to 6 characters long) which will precede the number given to identify new records (of which there are 7 types). This vector must be of a particular length with these specific names.

We'll import a different GEDCOM file which has some records in it:

```{r}
ged_max <- read_gedcom("https://gedcom.io/testfiles/gedcom70/maximal70.ged")

ged_max@xref_prefixes
```

The order that these records appear in the vector will also dictate the order in which records will appear in the exported file.

The `@c_xrefs` property gives a list of record xrefs in the GEDCOM object, split by records type:

```{r}
ged_max@c_xrefs
```

The next xrefs of each type will therefore be:

```{r}
ged_max@c_next_xref
```
